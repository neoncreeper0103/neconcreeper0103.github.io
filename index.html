<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <style>
        body
        {
            /* 이게 텍스트 드래그를 막아준다더라 */
            -webkit-user-select:none;
            -moz-user-select:none;
            -ms-user-select:none;
            user-select:none;
        }
        div
        {
            text-align: center;
        }
        td
        {
            width: 150px;
            height: 100px;
        }
        .bookable
        {
            background-color: rgb(0, 216, 0);
        }
        .booked
        {
            background-color: red;
        }
    </style>
    <script>
        function makeTable()
        {
            table = "";
            // 1번째 행 (노가다)
            table += "<tr>";
            table += "<td>";
            table += "</td>";
            table += "<td>";
            table += "월";
            table += "</td>";
            table += "<td>";
            table += "화";
            table += "</td>";
            table += "<td>";
            table += "수";
            table += "</td>";
            table += "<td>";
            table += "목";
            table += "</td>";
            table += "<td>";
            table += "금";
            table += "</td>";
            table += "<td>";
            table += "토";
            table += "</td>";
            table += "<td>";
            table += "일";
            table += "</td>";
            table += "</tr>";
            
            // 나머지는 for문 돌리기
            for(let i = 1; i <= 8; i++)
            {
                table += "<tr>";
                for(let j = 1; j <= 8; j++)
                {
                    if(j == 1)
                    {
                        table += "<td>";
                        table += String(i) + "시";
                        table += "</td>";
                    }
                    else
                    {
                        table += "<td class=\"bookable\" onclick=\"book()\" type=\"button\">";
                        table += "예약 가능";
                        table += "</td>";
                    }
                }
                table += "</tr>";
            }

            document.getElementById("mainTable").innerHTML += table;
        }
        
        // 예약 함수
        function book()
        {
            table = document.getElementById("mainTable");

            for(let i = 1; i <= 8; i++){
                for(let j = 1; j < 8; j++){
                    table.rows[i].cells[j].onclick = function(){
                        if(confirm("예약하시겠습니까?") == true){
                            table.rows[i].cells[j].className = "booked";
                            table.rows[i].cells[j].setAttribute("onclick", "unbook()");
                            table.rows[i].cells[j].innerText = "예약 완료";
                        }
                    }
                }
            }
        }

        // 예약취소 함수
        function unbook()
        {
            table = document.getElementById("mainTable");

            for(let i = 1; i <= 8; i++){
                for(let j = 1; j < 8; j++){
                    table.rows[i].cells[j].onclick = function(){
                        if(confirm("예약을 취소하시겠습니까?") == true){
                            table.rows[i].cells[j].className = "bookable";
                            table.rows[i].cells[j].setAttribute("onclick", "book()");
                            table.rows[i].cells[j].innerText = "예약 가능";
                        }
                    }
                }
            }
        }

    </script>
</head>
<body>
    <div>
        <table id="mainTable" border="1"></table>
    </div>

    <script>
        makeTable();
    </script>
</body>
</html>